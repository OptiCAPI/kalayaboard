<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶¨‡¶æ‡¶ö‡ßç‡¶ö‡¶æ‡¶¶‡ßá‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° | ‡¶ï‡¶æ‡¶≤‡¶æ‡¶á‡¶Ø‡¶º‡¶æ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡¶™‡ßç‡¶∞‡¶æ‡¶¨‡¶ø</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&family=Atma:wght@500;700&display=swap');

        :root {
            --primary-green: #2ecc71;
            --ocean-blue: #3498db;
            --sunny-yellow: #f1c40f;
            --berry-pink: #ff4757;
        }

        body { 
            font-family: 'Hind Siliguri', sans-serif; 
            background: #fff9e6 url('https://www.transparenttextures.com/patterns/kids-outline.png');
            overflow-x: hidden;
        }

        h1, h2, .btn-view, .notice-title-link { font-family: 'Atma', cursive; }

        /* Navbar Magic */
        .navbar { 
            background: linear-gradient(90deg, #2ecc71, #3498db);
            border-bottom: 5px solid #f1c40f;
            padding: 15px 0;
        }

        .header-section {
            background: white;
            padding: 30px 0;
            border-radius: 0 0 50px 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            margin-bottom: 30px;
            text-align: center;
        }

        .header-title { color: #ff4757; font-size: 2.5rem; text-shadow: 2px 2px #ffeaa7; }

        /* Search Box Kids Style */
        .search-container { max-width: 500px; margin: 20px auto; position: relative; }
        .search-input { 
            border-radius: 50px; 
            border: 3px solid #3498db; 
            padding: 15px 25px;
            font-size: 1.1rem;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.2);
        }

        /* Table/Card Styles */
        .table-container { 
            background: white; 
            border-radius: 30px; 
            padding: 20px;
            box-shadow: 0 15px 0px #e6e6e6;
            border: 2px solid #ddd;
        }

        .table thead { background: #f1c40f; color: #333; }
        .table th { border: none; padding: 20px; border-radius: 15px 15px 0 0; }
        
        .notice-row { 
            border-bottom: 2px dashed #eee; 
            transition: 0.3s;
        }
        .notice-row:hover { background: #f0f9ff !important; transform: scale(1.01); }

        .notice-title-link { color: #2c3e50; font-size: 1.2rem; text-decoration: none; }

        /* Buttons */
        .btn-view { 
            background: #ff4757; 
            color: white; 
            border-radius: 50px; 
            padding: 8px 25px; 
            border: none;
            box-shadow: 0 4px 0 #cf3543;
            transition: 0.2s;
        }
        .btn-view:active { transform: translateY(4px); box-shadow: none; }

        .pdf-icon { color: #e74c3c; font-size: 1.8rem; animation: pulse 2s infinite; }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        /* Modal Preview Kids Style */
        .modal-content { border-radius: 40px; border: 8px solid #3498db; overflow: hidden; }
        .modal-header { background: #3498db; color: white; border: none; }
        #pdf-iframe { width: 100%; height: 70vh; background: #eee; }

        .share-btn { 
            width: 45px; height: 45px; border-radius: 50%; 
            display: inline-flex; align-items: center; justify-content: center;
            color: white !important; margin: 0 5px; font-size: 1.2rem;
        }
    </style>
</head>
<body>

<audio id="popSound" src="https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3"></audio>

<nav class="navbar navbar-dark">
    <div class="container">
        <a class="navbar-brand fw-bold" href="index.html">
            <i class="fas fa-rocket me-2"></i> ‡¶ï‡¶æ‡¶≤‡¶æ‡¶á‡¶Ø‡¶º‡¶æ ‡¶¨‡ßã‡¶∞‡ßç‡¶° ‡¶∏‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶æ‡¶•‡¶Æ‡¶ø‡¶ï ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡ßü
        </a>
    </div>
</nav>

<div class="header-section">
    <div class="container">
        <h1 class="header-title animate__animated animate__bounce">üì¢ ‡¶∏‡ßã‡¶®‡¶æ‡¶Æ‡¶£‡¶ø‡¶¶‡ßá‡¶∞ ‡¶®‡ßã‡¶ü‡¶ø‡¶∂ ‡¶¨‡ßã‡¶∞‡ßç‡¶° üé®</h1>
        <p class="lead text-muted">‡¶ö‡¶≤‡ßã ‡¶¶‡ßá‡¶ñ‡¶ø ‡¶∏‡ßç‡¶ï‡ßÅ‡¶≤‡ßá ‡¶®‡¶§‡ßÅ‡¶® ‡¶ï‡ßÄ ‡¶ñ‡¶¨‡¶∞ ‡¶è‡¶≤‡ßã!</p>
        
        <div class="search-container">
            <input type="text" id="noticeSearch" class="form-control search-input" placeholder="üîç ‡¶®‡ßã‡¶ü‡¶ø‡¶∂‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßã..." onkeyup="searchNotice()">
        </div>
    </div>
</div>

<div class="container mb-5">
    <div class="table-container animate__animated animate__zoomIn">
        <div class="table-responsive">
            <table class="table align-middle" id="noticeTable">
                <thead>
                    <tr class="text-center">
                        <th>‡¶®‡¶Ç</th>
                        <th class="text-start">‡¶ñ‡¶¨‡¶∞‡ßá‡¶∞ ‡¶∂‡¶ø‡¶∞‡ßã‡¶®‡¶æ‡¶Æ üìù</th>
                        <th>‡¶¶‡ßá‡¶ñ‡ßã üëÅÔ∏è</th>
                        <th>‡¶´‡¶æ‡¶á‡¶≤ üìÇ</th>
                        <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ üìÖ</th>
                    </tr>
                </thead>
                <tbody id="notice-table-body">
                    <tr>
                        <td colspan="5" class="text-center py-5">
                            <img src="https://cdn-icons-png.flaticon.com/512/148/148767.png" width="50" class="animate__animated animate__rotateIn infinite">
                            <p class="mt-2">‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ú‡¶ø‡¶ï ‡¶π‡¶ö‡ßç‡¶õ‡ßá... ‡¶¶‡¶æ‡¶Å‡ßú‡¶æ‡¶ì ‡¶è‡¶ï‡¶ü‡ßÅ!</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="modalTitle">‡¶ñ‡¶¨‡¶∞‡¶ü‡¶ø ‡¶™‡ßú‡ßã üìñ</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body p-0">
                <iframe id="pdf-iframe" src=""></iframe>
                <div class="p-4 bg-light d-flex flex-wrap justify-content-between align-items-center">
                    <div>
                        <span class="fw-bold me-2">‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶™‡¶æ‡¶†‡¶æ‡¶ì:</span>
                        <a href="#" id="share-fb" target="_blank" class="share-btn" style="background:#3b5998"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" id="share-wa" target="_blank" class="share-btn" style="background:#25d366"><i class="fab fa-whatsapp"></i></a>
                        <a href="https://www.instagram.com/YOUR_USERNAME" id="share-ig" target="_blank" class="share-btn" style="background:#e4405f"><i class="fab fa-instagram"></i></a>
                        <a href="javascript:void(0)" onclick="copyNoticeLink()" class="share-btn" style="background:#607d8b"><i class="fas fa-link"></i></a>
                    </div>
                    <a href="#" id="modal-download-btn" target="_blank" class="btn btn-lg btn-primary rounded-pill px-5 shadow">
                        <i class="fas fa-cloud-download-alt me-2"></i> ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶∞‡¶æ‡¶ñ‡ßã
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
    const csv_url = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTWc0HbimA9ddlA7yP3KG4ahQosskjgdihVtL3EJIebhKdiF0_N10dkOEp_9Q66T7cX1JqHZXiwbwbN/pub?gid=0&single=true&output=csv";
    let currentPreviewLink = "";

    async function fetchNotices() {
        try {
            const response = await fetch(csv_url);
            const data = await response.text();
            const rows = data.split('\n').slice(1).filter(r => r.trim() !== "");
            const reversedRows = rows.reverse();
            
            let tableHtml = '';
            reversedRows.forEach((row, index) => {
                const col = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                if (col.length >= 3) {
                    const date = col[0].trim();
                    const title = col[1].replace(/"/g, "").trim();
                    const driveLink = col[2].trim();
                    const fileID = driveLink.match(/[-\w]{25,}/);
                    
                    const previewLink = fileID ? `https://drive.google.com/file/d/${fileID[0]}/preview` : driveLink;
                    const downloadLink = fileID ? `https://drive.google.com/uc?export=download&id=${fileID[0]}` : driveLink;

                    tableHtml += `
                    <tr class="notice-row animate__animated animate__fadeInUp" style="animation-delay: ${index * 0.1}s">
                        <td class="text-center"><span class="badge rounded-pill bg-info text-dark">${rows.length - index}</span></td>
                        <td class="text-start"><strong class="notice-title-link">${title}</strong></td>
                        <td class="text-center">
                            <button onclick="viewNotice('${title}', '${previewLink}', '${downloadLink}')" class="btn-view">‡¶™‡ßú‡¶ø üöÄ</button>
                        </td>
                        <td class="text-center">
                            <a href="${downloadLink}" target="_blank"><i class="fas fa-file-pdf pdf-icon"></i></a>
                        </td>
                        <td class="text-center text-muted small">${date}</td>
                    </tr>`;
                }
            });
            document.getElementById('notice-table-body').innerHTML = tableHtml || "<tr><td colspan='5' class='text-center'>‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶ñ‡¶¨‡¶∞ ‡¶®‡ßá‡¶á!</td></tr>";
        } catch (e) {
            document.getElementById('notice-table-body').innerHTML = "<tr><td colspan='5' class='text-center text-danger'>‡¶â‡¶´! ‡¶á‡¶®‡ßç‡¶ü‡¶æ‡¶∞‡¶®‡ßá‡¶ü‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§</td></tr>";
        }
    }

    function searchNotice() {
        let input = document.getElementById('noticeSearch').value.toLowerCase();
        let rows = document.querySelectorAll(".notice-row");
        rows.forEach(row => {
            let text = row.cells[1].textContent.toLowerCase();
            row.style.display = text.includes(input) ? "" : "none";
        });
    }

    function viewNotice(title, previewLink, downloadLink) {
        document.getElementById('popSound').play().catch(() => {});
        currentPreviewLink = previewLink;
        document.getElementById('modalTitle').innerText = title;
        document.getElementById('pdf-iframe').src = previewLink;
        document.getElementById('modal-download-btn').href = downloadLink;

        // ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞‡¶´‡ßÅ‡¶≤ ‡¶ï‡¶®‡¶´‡ßá‡¶ü‡¶ø (‡¶¨‡¶ø‡¶ú‡ßü ‡¶â‡¶≤‡ßç‡¶≤‡¶æ‡¶∏)
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });

        new bootstrap.Modal(document.getElementById('previewModal')).show();
    }

    function copyNoticeLink() {
        navigator.clipboard.writeText(currentPreviewLink);
        alert("‡¶≤‡¶ø‡¶ô‡ßç‡¶ï ‡¶ï‡¶™‡¶ø ‡¶π‡ßü‡ßá‡¶õ‡ßá! ‡¶è‡¶ñ‡¶® ‡¶¨‡¶®‡ßç‡¶ß‡ßÅ‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶ì‡•§ üîó");
    }

    document.getElementById('previewModal').addEventListener('hidden.bs.modal', () => {
        document.getElementById('pdf-iframe').src = "";
    });

    window.onload = fetchNotices;
</script>
</body>
</html>
