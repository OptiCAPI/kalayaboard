<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>একাডেমিক ট্রান্সক্রিপ্ট | ১২নং কালাইয়া বোর্ড সপ্রাবি</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ফন্ট ইমপোর্ট (কাল্পনা ইউনিকোড না থাকলে এটি সাধারণ হ্যান্ডরাইটিং বা প্রিমিয়াম শেরিফ ফন্টে ব্যাকআপ নিবে) */
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;700&display=swap');

        :root { --primary-green: #006A4E; }
        
        body { background-color: #f0f2f5; font-family: 'Hind Siliguri', sans-serif; }
        
        /* প্রিমিয়াম ফন্ট স্টাইল */
        .premium-title { font-family: 'Kalpana', 'Constantia', serif; font-weight: bold; }
        .student-name { font-family: 'Kalpana', 'Constantia', serif; font-style: italic; font-size: 24px; color: #000; }
        .table-font { font-family: 'Hind Siliguri', sans-serif; font-size: 15px; }

        /* A4 Page Container: একদম সঠিক মাপে ফিক্সড */
        #resultArea {
            width: 210mm; 
            height: 297mm; 
            background: white;
            margin: 20px auto; 
            padding: 15mm; 
            box-sizing: border-box;
            border: 12px double var(--primary-green); 
            position: relative; 
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.15);
        }

        /* প্রিমিয়াম ওয়াটারমার্ক: টেবিলের সামনে এবং একদম সোজা (Straight) */
        .watermark-overlay {
            position: absolute; 
            top: 55%; left: 50%; 
            transform: translate(-50%, -50%); /* সোজা রাখার জন্য রোটেশন সরানো হয়েছে */
            width: 550px; 
            opacity: 0.05; /* ৫% ভিজিবিলিটি */
            z-index: 9999; /* সব কিছুর সামনে */
            pointer-events: none;
        }

        .main-content { position: relative; z-index: 10; flex-grow: 1; }
        .table-main { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .table-main th, .table-main td { border: 1.5px solid #000 !important; vertical-align: middle; padding: 6px !important; }

        /* ফুটার পজিশন: পেজের একদম নিচে ফিক্সড */
        .footer-signatures {
            position: absolute;
            bottom: 25mm;
            left: 15mm;
            right: 15mm;
            display: flex;
            justify-content: space-between;
            z-index: 1000;
        }

        /* প্রিন্ট সেটিংস: কোনো গ্যাপ থাকবে না */
        @media print {
            @page { size: A4; margin: 0; }
            body { background: none; margin: 0; padding: 0; }
            .no-print { display: none !important; }
            #resultArea { 
                margin: 0 !important; 
                border: 12px double var(--primary-green) !important;
                width: 210mm !important;
                height: 297mm !important;
                box-shadow: none;
                page-break-after: always;
            }
        }
    </style>
</head>
<body>

<div class="container no-print py-4">
    <div class="card p-4 shadow-sm mx-auto mb-4" style="max-width: 500px; border-radius: 15px;">
        <h5 class="text-center fw-bold text-success mb-3">ফলাফল অনুসন্ধান</h5>
        <div class="row g-2">
            <div class="col-12"><input type="number" id="rollInput" class="form-control text-center" placeholder="রোল নম্বর"></div>
        </div>
        <button class="btn btn-success w-100 mt-3 rounded-pill fw-bold" onclick="generateResult()">ফলাফল দেখুন</button>
    </div>
</div>

<div id="resultArea" class="d-none">
    <img src="images/dpe.png" class="watermark-overlay">
    
    <div class="main-content">
        <div class="text-center">
            <img src="images/govt.png" style="width:70px" class="mb-2">
            <h2 class="premium-title mb-0" style="color: #006A4E; font-size: 30px;">১২নং কালাইয়া বোর্ড সরকারি প্রাথমিক বিদ্যালয়</h2>
            <p class="mb-0 fw-bold">ইন্দুরকানী, পিরোজপুর | [cite_start]স্থাপিত: ১৯৩০ [cite: 3]</p>
            <h4 class="mt-3 border-bottom d-inline-block pb-1 fw-bold">একাডেমিক ট্রান্সক্রিপ্ট - <span id="dispYear"></span></h4>
        </div>

        <div class="row mt-5 mb-3 px-2">
            <div class="col-7">
                <p class="mb-1"><strong>নাম:</strong> <span class="student-name" id="dispName"></span></p>
                <p class="mb-1"><strong>শ্রেণি:</strong> <span id="dispClass"></span></p>
            </div>
            <div class="col-5 text-end">
                <p class="mb-1"><strong>রোল:</strong> <span id="dispRoll"></span></p>
                <p class="mb-1"><strong>মূল্যায়ন:</strong> <span id="dispExam"></span></p>
            </div>
        </div>

        <table class="table-main table-bordered text-center table-font">
            <thead id="tableHead" class="table-light"></thead>
            <tbody id="tableBody" class="fw-bold text-dark"></tbody>
            <tfoot id="tableFoot"></tfoot>
        </table>
    </div>

    <div class="footer-signatures">
        <div class="text-center">
            <p class="mb-0">....................................</p>
            <p class="fw-bold">শ্রেণি শিক্ষক</p>
        </div>
        <div class="text-center">
            <p class="mb-0">....................................</p>
            [cite_start]<p class="fw-bold">প্রধান শিক্ষক [cite: 23, 46]</p>
        </div>
    </div>

    <div class="text-center no-print" style="margin-top: 20px; position: relative; z-index: 10001;">
        <button class="btn btn-dark px-5 rounded-pill shadow" onclick="window.print()">
            <i class="fas fa-print me-2"></i> প্রিন্ট করুন
        </button>
    </div>
</div>

<script>
    // আপনার ডাটা ফেচিং এবং লজিক কোড এখানে থাকবে
    // সংক্ষেপের জন্য শুধু রেন্ডারিং ফাংশনটি আপডেট করা হলো
    
    function generateResult() {
        const roll = document.getElementById('rollInput').value;
        const urlParams = new URLSearchParams(window.location.search);
        const selectedYear = urlParams.get('year') || "2026";
        
        // এখানে আপনার আগের script loading লজিক ব্যবহার করুন
        [cite_start]// নমুনা হিসেবে ইসরাত জাহানের ডাটা রেন্ডার করে দেখাচ্ছি [cite: 7]
        renderSheet({
            [cite_start]name: "Israt Jahan ",
            roll: roll,
            year: selectedYear,
            subjects: [
                [cite_start]{ name: "বাংলা", t1: 97, t2: 95, t3: 98, final: 98.1 }, [cite: 20]
                [cite_start]{ name: "গণিত", t1: 81, t2: 89, t3: 98, final: 94.1 }, [cite: 20]
                [cite_start]{ name: "ইংরেজি", t1: 82, t2: 86, t3: 90, final: 88.2 } [cite: 20]
            ]
        }, selectedYear);
    }

    function renderSheet(s, year) {
        document.getElementById('dispName').innerText = s.name;
        document.getElementById('dispYear').innerText = year;
        document.getElementById('dispRoll').innerText = s.roll;
        [cite_start]document.getElementById('dispClass').innerText = "পঞ্চম [cite: 15, 38]";
        [cite_start]document.getElementById('dispExam').innerText = (year === "2026") ? "২য় প্রান্তিক" : "সমন্বিত ";
        
        // টেবিল কন্টেন্ট জেনারেট করুন...
        document.getElementById('resultArea').classList.remove('d-none');
    }
</script>

</body>
</html>
