<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>শিক্ষার্থী তথ্য যাচাই - কালাইয়া বোর্ড সপ্রাবি</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; background: #f0fdf4; }
        
        /* Navbar Style (Same as your other pages) */
        .navbar { background: #006A4E; }
        .navbar-brand, .nav-link { color: white !important; }

        /* Search Box Design */
        .search-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 106, 78, 0.1);
            margin-top: -50px;
            position: relative;
            z-index: 10;
        }

        .header-bg {
            background: linear-gradient(135deg, #006A4E 0%, #004d39 100%);
            height: 250px;
            border-radius: 0 0 50px 50px;
            position: relative;
        }

        /* Result Card */
        .student-card {
            border-top: 5px solid #FFB800;
            background: #fff;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
        }
        
        .st-photo {
            width: 130px; height: 130px;
            border-radius: 50%;
            border: 5px solid #fff;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            object-fit: cover;
            margin-top: -65px;
            background: #fff;
        }
    </style>
</head>
<body>

<nav class="navbar navbar-expand-lg sticky-top">
    <div class="container">
        <a class="navbar-brand" href="index.html">
            <img src="images/govt.png" width="30" class="me-2"> কালাইয়া সপ্রাবি
        </a>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="index.html">হোম</a></li>
                <li class="nav-item"><a class="nav-link active" href="#">ছাত্র তথ্য</a></li>
            </ul>
        </div>
    </div>
</nav>

<div class="header-bg d-flex align-items-center justify-content-center text-white text-center">
    <div>
        <h2 class="fw-bold">শিক্ষার্থী তথ্য যাচাই</h2>
        <p class="opacity-75">আইডি নম্বর দিয়ে তথ্য অনুসন্ধান করুন</p>
    </div>
</div>

<div class="container mb-5">
    <div class="row justify-content-center">
        
        <div class="col-md-8 col-lg-6">
            <div class="search-container text-center animate__animated animate__fadeInUp">
                <div class="input-group input-group-lg mb-3">
                    <input type="number" id="searchInput" class="form-control border-success" placeholder="আইডি লিখুন (যেমন: 202601)">
                    <button class="btn btn-success px-4 fw-bold" onclick="findStudent()">
                        <i class="fas fa-search"></i> খুঁজুন
                    </button>
                </div>
                <small class="text-muted">গোপনীয়তা রক্ষার্থে শুধুমাত্র আইডি নম্বর গ্রহণযোগ্য</small>
            </div>
        </div>

        <div class="col-md-8 col-lg-6 mt-4 d-none" id="resultSection">
            <div class="student-card p-4 text-center animate__animated animate__zoomIn">
                <img id="stImg" src="" class="st-photo" onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
                
                <h3 class="mt-3 fw-bold text-success" id="stName">নাম লোড হচ্ছে...</h3>
                <div class="badge bg-warning text-dark mb-4 px-3">শ্রেণি: <span id="stClass">--</span> | রোল: <span id="stRoll">--</span></div>

                <div class="bg-light rounded p-3 text-start">
                    <div class="row mb-2 border-bottom pb-2">
                        <div class="col-5 text-muted small fw-bold">আইডি নং:</div>
                        <div class="col-7 fw-bold" id="stID">--</div>
                    </div>
                    <div class="row mb-2 border-bottom pb-2">
                        <div class="col-5 text-muted small fw-bold">পিতার নাম:</div>
                        <div class="col-7" id="stFather">--</div>
                    </div>
                    <div class="row mb-2 border-bottom pb-2">
                        <div class="col-5 text-muted small fw-bold">মাতার নাম:</div>
                        <div class="col-7" id="stMother">--</div>
                    </div>
                    <div class="row">
                        <div class="col-5 text-muted small fw-bold">জন্ম তারিখ:</div>
                        <div class="col-7" id="stDOB">--</div>
                    </div>
                </div>

                <button onclick="window.print()" class="btn btn-outline-secondary btn-sm mt-3 w-100 rounded-pill">
                    <i class="fas fa-print"></i> তথ্য প্রিন্ট করুন
                </button>
            </div>
        </div>

        <div class="col-md-6 mt-3 text-center d-none" id="errorMsg">
            <div class="alert alert-danger rounded-pill">
                <i class="fas fa-exclamation-circle me-2"></i> কোনো তথ্য পাওয়া যায়নি!
            </div>
        </div>

    </div>
</div>

<footer class="bg-dark text-white text-center py-3 mt-5">
    <small>© ২০২৬ কালাইয়া বোর্ড সপ্রাবি</small>
</footer>

<script>
    // ⚠️ আপনার গুগল শিটের CSV লিঙ্কটি এখানে বসান
    const SHEET_CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQiLzaDQoM0qIVAwp7obqRfdhkE1jVJQkVSdfnuq82VEALLRnFZXmyICoVoZ3VziihMNv5kcPDPFf4T/pub?gid=1732228779&single=true&output=csv";

    async function findStudent() {
        const input = document.getElementById('searchInput').value.trim();
        const resultSec = document.getElementById('resultSection');
        const errorMsg = document.getElementById('errorMsg');

        // Reset
        resultSec.classList.add('d-none');
        errorMsg.classList.add('d-none');

        if(!input) { alert("দয়া করে আইডি লিখুন"); return; }

        try {
            const res = await fetch(SHEET_CSV_URL);
            const text = await res.text();
            const rows = text.split('\n').slice(1); // Skip header

            let found = false;

            rows.forEach(row => {
                // Column Order in Sheet: ID(0), Name(1), Class(2), Roll(3), DOB(4), Father(5), Mother(6), PhotoLink(7)
                const col = row.split(',');

                if(col[0].trim() === input) {
                    found = true;
                    
                    document.getElementById('stID').innerText = col[0];
                    document.getElementById('stName').innerText = col[1];
                    document.getElementById('stClass').innerText = col[2];
                    document.getElementById('stRoll').innerText = col[3];
                    document.getElementById('stDOB').innerText = col[4];
                    document.getElementById('stFather').innerText = col[5];
                    document.getElementById('stMother').innerText = col[6];
                    
                    // Photo logic
                    let photo = col[7] && col[7].trim() !== "" ? col[7] : "images/student_placeholder.png";
                    document.getElementById('stImg').src = photo;

                    resultSec.classList.remove('d-none');
                }
            });

            if(!found) errorMsg.classList.remove('d-none');

        } catch (error) {
            console.error(error);
            alert("ডাটাবেস লোড করা যাচ্ছে না। ইন্টারনেট কানেকশন চেক করুন।");
        }
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
